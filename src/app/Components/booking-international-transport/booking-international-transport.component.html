<div
  class="max-w-3xl mx-auto p-6 bg-[var(--surface)] rounded-lg shadow-md my-10"
>
  <h2 class="text-2xl font-bold mb-4 text-[var(--text-primary)]">
    Flight Booking
  </h2>

  <form
    [formGroup]="bookingForm"
    (ngSubmit)="submitBooking()"
    class="space-y-6"
  >
    <!-- Departure Flight Section -->
    <div
      *ngIf="selectedDepartureFlight"
      [formGroupName]="'departureBooking'"
      class="border border-[var(--border)] p-4 rounded bg-[var(--background)]"
    >
      <h3 class="text-xl font-semibold text-[var(--text-primary)] mb-2">
        Departure Flight
      </h3>
      <p class="text-[var(--text-secondary)]">
        <strong>Airline:</strong> {{ selectedDepartureFlight.carrierName }}
      </p>
      <p class="text-[var(--text-secondary)]">
        <strong>Flight Number:</strong>
        {{ selectedDepartureFlight.flightNumber }}
      </p>
      <p class="text-[var(--text-secondary)]">
        <strong>From:</strong> {{ selectedDepartureFlight.departureAirport }} |
        <strong>To:</strong> {{ selectedDepartureFlight.arrivalAirport }}
      </p>
      <p class="text-[var(--text-secondary)]">
        <strong>Departure Date:</strong>
        {{ selectedDepartureFlight.departureDate | date : "short" }}
      </p>

      <label class="block mb-1 font-medium text-[var(--text-primary)]"
        >Number of Seats:</label
      >
      <input
        type="number"
        formControlName="numberOfSeats"
        min="1"
        [max]="selectedDepartureFlight.availableSeats"
        (input)="calculateTotals()"
        class="border border-[var(--border)] rounded px-3 py-2 w-full outline-none focus:ring-2 focus:ring-[var(--primary)] bg-[var(--background)] text-[var(--text-primary)]"
      />
      <p class="text-[var(--text-secondary)] mt-2 font-medium">
        Total Price: {{ departureTotal }} EGP
      </p>
    </div>

    <!-- Return Flight Section -->
    <div
      *ngIf="selectedDepartureFlight.returnDate"
      class="border border-[var(--border)] p-4 rounded bg-[var(--background)]"
    >
      <h3 class="text-xl font-semibold text-[var(--text-primary)] mb-2">
        Return Flight
      </h3>
      <p class="text-[var(--text-secondary)]">
        <strong>Airline:</strong> {{ selectedDepartureFlight.carrierName }}
      </p>
      <p class="text-[var(--text-secondary)]">
        <strong>Flight Number:</strong>
        {{ selectedDepartureFlight.flightNumber }}
      </p>
      <p class="text-[var(--text-secondary)]">
        <strong>From:</strong> {{ selectedDepartureFlight.arrivalAirport }} |
        <strong>To:</strong> {{ selectedDepartureFlight.departureAirport }}
      </p>
      <p class="text-[var(--text-secondary)]">
        <strong>Departure Date:</strong>
        {{ selectedDepartureFlight.returnDate | date : "short" }}
      </p>

      <label class="block mb-1 font-medium text-[var(--text-primary)]"
        >Number of Seats:</label
      >
      <input
        type="number"
        [value]="bookingForm.get('departureBooking.numberOfSeats')?.value"
        min="1"
        [max]="selectedDepartureFlight.availableSeats"
        (input)="calculateTotals()"
        readonly
        class="border border-[var(--border)] rounded px-3 py-2 w-full outline-none bg-gray-100 text-[var(--text-secondary)] cursor-not-allowed"
      />
      <p class="text-[var(--text-secondary)] mt-2 font-medium">
        Total Price: {{ returnTotal }} EGP
      </p>
    </div>

    <!-- Total Booking Price -->
    <div class="text-lg font-semibold text-[var(--text-primary)]">
      Total Booking Price: {{ totalBookingPrice }} EGP
    </div>

    <!-- Confirm Booking Button -->
    <button
      type="submit"
      class="w-full text-white font-medium px-4 py-2 rounded transition-all duration-200 bg-[var(--primary)] hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:ring-offset-2"
      [disabled]="bookingForm.invalid"
    >
      Confirm Booking & Pay
    </button>
  </form>
</div>
