<div class="max-w-3xl mx-auto p-6 bg-[var(--color-surface)] rounded-lg shadow-md my-10">
  <h2 class="text-2xl font-bold mb-4 text-[var(--color-text)]">Book Flight</h2>

  <!-- Flight Details Card -->
  <div *ngIf="selectedDepartureFlight" class="border border-[var(--border)] p-4 rounded mb-6 bg-[var(--color-bg)]">
    <h3 class="text-xl font-semibold text-[var(--color-text)]">{{ selectedDepartureFlight.carrierName }}</h3>
    <p class="text-[var(--color-text-muted)]">Flight: {{ selectedDepartureFlight.flightNumber }}</p>
    <p class="text-[var(--color-text-muted)]">Route: {{ selectedDepartureFlight.departureAirport }} â†’ {{
      selectedDepartureFlight.arrivalAirport }}</p>
    <p class="text-[var(--color-text-muted)]">Departure: {{ selectedDepartureFlight.departureDate | date:'medium' }}</p>
    <p *ngIf="selectedDepartureFlight.returnDate" class="text-[var(--color-text-muted)]">Return: {{
      selectedDepartureFlight.returnDate | date:'medium' }}</p>
    <p class="text-[var(--color-text-muted)]">Class: {{ selectedDepartureFlight.flightClass || 'Economy' }}</p>
    <p class="text-[var(--color-text-muted)]">Price per seat: {{ selectedDepartureFlight.price | currency:'SAR' }}</p>
  </div>

  <form [formGroup]="bookingForm" (ngSubmit)="submitBooking()" class="space-y-4">
    <div formGroupName="departureBooking">
      <!-- Number of Seats -->
      <div>
        <label class="block mb-1 font-medium text-[var(--color-text)]">Number of Seats</label>
        <input type="number" formControlName="numberOfSeats" min="1"
          [max]="selectedDepartureFlight.availableSeats || 10" (input)="calculateTotals()"
          class="border border-[var(--border)] rounded px-4 py-2 w-full outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)] bg-[var(--color-bg)]"
          [class.border-red-500]="bookingForm.get('departureBooking.numberOfSeats')?.touched && bookingForm.get('departureBooking.numberOfSeats')?.invalid" />
        <div
          *ngIf="bookingForm.get('departureBooking.numberOfSeats')?.touched && bookingForm.get('departureBooking.numberOfSeats')?.invalid"
          class="text-red-600 text-sm mt-1">
          <span *ngIf="bookingForm.get('departureBooking.numberOfSeats')?.errors?.['required']">Required</span>
          <span *ngIf="bookingForm.get('departureBooking.numberOfSeats')?.errors?.['min']">Minimum 1 seat</span>
          <span *ngIf="bookingForm.get('departureBooking.numberOfSeats')?.errors?.['max']">Maximum {{
            selectedDepartureFlight.availableSeats }} seats</span>
        </div>
      </div>
    </div>

    <!-- Total Price -->
    <div class="text-lg font-semibold text-[var(--color-text)]">
      Total Price: {{ totalBookingPrice | currency:'SAR' }}
    </div>

    <!-- Submit Button -->
    <button type="submit"
      class="w-full text-white font-medium px-4 py-2 rounded transition-all duration-200
        disabled:bg-gray-400 disabled:cursor-not-allowed
        bg-[var(--primary)] hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:ring-offset-2"
      [disabled]="bookingForm.invalid">
      Confirm & Continue
    </button>
  </form>
</div>