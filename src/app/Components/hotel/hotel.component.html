<!-- Filters & Search -->
<section
  class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8 sticky top-0 bg-[var(--color-surface)] z-20 p-4 shadow-md flex flex-wrap gap-3 items-center">
  <!-- Search Input -->
  <input type="text" [placeholder]="i18n.translate('hotel.searchPlaceholder')" [(ngModel)]="searchText"
    class="bg-[var(--color-bg)] text-[var(--color-text)] flex-1 min-w-[200px] border border-[var(--border)] rounded px-4 py-2 outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)]" />

  <!-- City Filter -->
  <select [(ngModel)]="city"
    class="bg-[var(--color-bg)] text-[var(--color-text)] border border-[var(--border)] rounded px-4 py-2 outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)]"
    (change)="onFilterChange()">
    <option value="All">üåç {{ i18n.translate('common.all') }}</option>
    <option value="Makkah" selected>üïã {{ i18n.translate('hotel.city.makkah') }}</option>
    <option value="Madinah">üïå {{ i18n.translate('hotel.city.madinah') }}</option>
  </select>

  <!-- Sort Filter -->
  <select [(ngModel)]="sortBy"
    class="bg-[var(--color-bg)] text-[var(--color-text)] border border-[var(--border)] rounded px-4 py-2 outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)]"
    (change)="onFilterChange()">
    <option value="recommended">{{ i18n.translate('hotel.sort.recommended') }}</option>
    <option value="distance">{{ i18n.translate('hotel.sort.distance') }}</option>
    <option value="rating">{{ i18n.translate('hotel.sort.rating') }}</option>
  </select>

  <!-- View Toggle -->
  <div class="flex gap-2">
    <!-- Grid Button -->
    <button (click)="toggleView('grid')" [ngClass]="
        viewMode === 'grid'
          ? 'bg-[var(--primary)] text-white hover:opacity-90'
          : 'bg-[var(--color-bg)] text-[var(--color-text)] border border-[var(--border)] hover:bg-[var(--color-surface)] dark:bg-gray-800 dark:text-[var(--color-text-muted)]200 dark:border-[var(--border)]600 dark:hover:bg-gray-700'
      "
      class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium transition-all rounded-md px-4 py-2 focus:outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)] focus:ring-offset-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
        <rect width="18" height="18" x="3" y="3" rx="2"></rect>
        <path d="M3 9h18"></path>
        <path d="M3 15h18"></path>
        <path d="M9 3v18"></path>
        <path d="M15 3v18"></path>
      </svg>
    </button>

    <!-- List Button -->
    <button (click)="toggleView('list')" [ngClass]="
        viewMode === 'list'
          ? 'bg-[var(--primary)] text-white hover:opacity-90'
          : 'bg-[var(--color-bg)] text-[var(--color-text)] border border-[var(--border)] hover:bg-[var(--color-surface)] dark:bg-gray-800 dark:text-[var(--color-text-muted)]200 dark:border-[var(--border)]600 dark:hover:bg-gray-700'
      "
      class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium transition-all rounded-md px-4 py-2 focus:outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)] focus:ring-offset-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>
  </div>
</section>

<!-- Hotels Grid/List -->
<section class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <!-- Hotels Grid -->
  <div *ngIf="viewMode === 'grid'" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    <div *ngFor="let hotel of filteredHotels()"
      class="overflow-hidden border border-[var(--border)] bg-[var(--color-bg)] hover:shadow-[var(--shadow-heavy)] transition-all duration-300 group"
      style="border-radius: var(--radius-card)">
      <div class="relative h-48 overflow-hidden">
        <img [src]="getImageUrl(hotel)" [alt]="hotel.name"
          class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300" />
        <div class="absolute top-3 right-3 bg-[var(--primary)] text-white px-2 py-1 rounded text-xs border-0">
          {{ hotel.city }}
        </div>
      </div>

      <div class="p-5">
        <!-- Rating -->
        <div class="flex items-center gap-1 mb-2">
          <ng-container *ngFor="let i of [1, 2, 3, 4, 5]">
            <lucide-icon name="star" class="h-4 w-4" [ngClass]="{
                'text-yellow-500 fill-yellow-500': hotel.starRating >= i,
                'text-[var(--color-text-muted)]300': hotel.starRating < i
              }"></lucide-icon>
          </ng-container>

          <span class="text-[var(--color-text-muted)] ml-1 text-sm">{{ hotel.starRating }}/5</span>
        </div>

        <!-- Hotel Name -->
        <h4 class="text-[var(--color-text)] mb-2">{{ hotel.name }}</h4>

        <!-- Distance -->
        <div class="flex items-center gap-4 mb-3 text-[var(--color-text-muted)]">
          <div class="flex items-center gap-1">
            <lucide-icon name="map-pin" class="h-4 w-4"></lucide-icon>
            <span>{{ hotel.distanceToHaram }}
              {{ i18n.translate("hotel.fromHaram") }}</span>
          </div>
        </div>

        <!-- Description -->
        <p class="text-[var(--color-text-muted)] mb-4 text-sm">
          {{ hotel.description }}
        </p>

        <!-- Price & Button -->
        <div class="flex items-end justify-between">
          <!-- <div>
            <span class="text-[var(--color-text-muted)]">{{
              i18n.translate("common.from")
            }}</span>
            <div class="text-[var(--color-text)]">
              <span class="text-2xl">${{ hotel.pricePerNight }}</span>
              <span class="text-[var(--color-text-muted)]">{{
                i18n.translate("common.perPerson")
              }}</span>
            </div>
          </div> -->
          <button type="button" (click)="viewDetails(hotel.id)"
            class="bg-[var(--primary)] text-white hover:opacity-90 px-4 py-2 rounded text-sm focus:outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)] focus:ring-offset-2"
            [attr.aria-label]="
              i18n.translate('aria.viewDetailsFor') + ' ' + hotel.name
            ">
            {{ i18n.translate("common.viewDetails") }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- List View -->
  <div *ngIf="viewMode === 'list'" class="flex flex-col gap-4">
    <div *ngFor="let hotel of filteredHotels()"
      class="border border-[var(--border)] bg-[var(--color-bg)] rounded-xl overflow-hidden flex flex-col md:flex-row hover:shadow-[var(--shadow-heavy)] transition-all">
      <img [src]="getImageUrl(hotel)" [alt]="hotel.name"
        class="w-full md:w-1/3 h-48 object-cover rounded-t-xl md:rounded-l-xl md:rounded-tr-none" />
      <div class="p-4 flex-1 flex flex-col justify-between">
        <div>
          <h4 class="text-[var(--color-text)] font-semibold mb-2">
            {{ hotel.name }}
          </h4>
          <!-- Distance -->
          <div class="flex items-center gap-4 mb-3 text-[var(--color-text-muted)]">
            <div class="flex items-center gap-1">
              <lucide-icon name="map-pin" class="h-4 w-4"></lucide-icon>
              <span>{{ hotel.distanceToHaram }}
                {{ i18n.translate("hotel.fromHaram") }}</span>
            </div>
          </div>
          <p class="text-[var(--color-text-muted)] mb-2 text-sm">
            {{ hotel.description }}
          </p>
          <!-- Rating -->
          <div class="flex items-center gap-1 mb-2">
            <ng-container *ngFor="let i of [1, 2, 3, 4, 5]">
              <lucide-icon name="star" class="h-4 w-4" [ngClass]="{
                'text-yellow-500 fill-yellow-500': hotel.starRating >= i,
                'text-[var(--color-text-muted)]300': hotel.starRating < i
              }"></lucide-icon>
            </ng-container>

            <span class="text-[var(--color-text-muted)] ml-1 text-sm">{{ hotel.starRating }}/5</span>
          </div>
        </div>
        <!--  Button -->
        <div class="flex items-end justify-between">
          <button type="button" (click)="viewDetails(hotel.id)"
            class="bg-[var(--primary)] text-white hover:opacity-90 px-4 py-2 rounded text-sm focus:outline-none text-[var(--color-text)] focus:ring-2 focus:ring-[var(--primary)] focus:ring-offset-2"
            [attr.aria-label]="
              i18n.translate('aria.viewDetailsFor') + ' ' + hotel.name
            ">
            {{ i18n.translate("common.viewDetails") }}
          </button>
        </div>
      </div>
    </div>
  </div>
</section>