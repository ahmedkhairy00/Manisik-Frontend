<div class="max-w-5xl mx-auto p-6">
  <!-- Loading -->
  <div *ngIf="loading" class="p-8 text-center text-gray-500">
    {{ i18n.translate("hotel.loading") }}
  </div>

  <!-- Hotel Details -->
  <div
    *ngIf="!loading && hotel"
    class="border border-[var(--border)] bg-[var(--background)] rounded-xl overflow-hidden shadow-md flex flex-col md:flex-row transition-all"
  >
    <!-- Hotel Image -->
    <img
      [src]="getImageUrl(hotel)"
      [alt]="hotel.name"
      class="w-full md:w-1/3 h-96 object-cover rounded-t-xl md:rounded-l-xl md:rounded-tr-none"
    />

    <!-- Hotel Info -->
    <div class="p-6 flex-1 flex flex-col justify-between">
      <div>
        <!-- Name -->
        <h2 class="text-3xl font-bold mb-2 text-[var(--text-primary)]">
          {{ hotel.name }}
        </h2>

        <!-- Location & Distance -->
        <div class="flex items-center gap-4 mb-3 text-[var(--text-secondary)]">
          <lucide-icon name="map-pin" class="h-4 w-4"></lucide-icon>
          <span
            >{{ hotel.city }} &middot; {{ hotel.distanceToHaram }}
            {{ i18n.translate("hotel.fromHaram") }}</span
          >
        </div>

        <!-- Rating -->
        <div class="flex items-center gap-1 mb-4">
          <ng-container *ngFor="let i of [1, 2, 3, 4, 5]">
            <lucide-icon
              name="star"
              class="h-5 w-5"
              [ngClass]="{
                'text-yellow-500 fill-yellow-500': hotel.starRating >= i,
                'text-gray-300': hotel.starRating < i
              }"
            ></lucide-icon>
          </ng-container>
          <span class="text-gray-500 ml-2 text-sm"
            >{{ hotel.starRating }}/5</span
          >
        </div>

        <!-- Description -->
        <p class="text-[var(--text-secondary)] mb-6">{{ hotel.description }}</p>
      </div>

      <!-- Actions -->
      <div class="flex flex-wrap gap-3">
        <button
          (click)="toggleRooms()"
          class="bg-[var(--primary)] text-white px-5 py-2 rounded hover:opacity-90"
        >
          {{
            showRooms
              ? i18n.translate("hotel.hideRooms")
              : i18n.translate("hotel.showRooms")
          }}
        </button>
      </div>
    </div>
  </div>

  <!-- Rooms section (shown after clicking) -->
  <div *ngIf="showRooms && hotel?.rooms?.length" class="mt-6">
    <!-- <h3 class="text-2xl font-semibold mb-4 text-[var(--text-primary)]">
      Room Types
    </h3> -->

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div
        *ngFor="let room of hotel.rooms"
        class="border p-4 rounded-lg bg-[var(--background)] hover:shadow-md transition cursor-pointer"
        [class.border-primary]="selectedRoom?.id === room.id"
        [class.border-red-500]="!room.isActive"
        (click)="selectRoom(room)"
      >
        <div class="flex justify-between items-start">
          <div>
            <div class="text-lg font-semibold text-[var(--text-primary)]">
              {{ room.roomType }}
            </div>
            <div class="text-sm text-[var(--text-secondary)]">
              {{ i18n.translate("hotel.capacity") }}: {{ room.capacity }}
              {{ i18n.translate("hotel.person") }}
            </div>
          </div>

          <div class="text-right">
            <div class="text-lg font-bold text-[var(--text-primary)]">
              ${{ formatPrice(room.pricePerNight) }}
            </div>
            <div class="text-sm text-[var(--text-secondary)]">
              <!-- {{ i18n.translate("hotel.available") }}: -->
              <span *ngIf="room.availableRooms > 0">
                {{ i18n.translate("hotel.available") }}:
                {{ room.availableRooms }} {{ i18n.translate("hotel.rooms") }}
              </span>

              <span
                *ngIf="room.availableRooms == 0"
                class="text-red-500 font-medium"
              >
                {{ i18n.translate("hotel.unavailable") }}
              </span>
            </div>
          </div>
        </div>

        <div class="mt-4 flex justify-between items-center">
          <div
            *ngIf="selectedRoom?.id === room.id"
            class="text-sm text-green-600 font-medium"
          >
            {{ i18n.translate("hotel.selected") }}
          </div>
          <button
            (click)="bookSelectedRoom(); $event.stopPropagation()"
            class="bg-[var(--primary)] text-white px-3 py-1 rounded text-sm"
            [disabled]="room.availableRooms <= 0 || !room.isActive"
            [class.opacity-50]="!room.isActive"
            [class.cursor-not-allowed]="!room.isActive"
          >
            {{ i18n.translate("hotel.book") }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- no rooms -->
  <div
    *ngIf="showRooms && (!hotel?.rooms || hotel.rooms.length === 0)"
    class="mt-6 p-4 text-center text-gray-500 border rounded"
  >
    {{ i18n.translate("hotel.noRooms") }}
  </div>

  <!-- No hotel found -->
  <div *ngIf="!loading && !hotel" class="p-8 text-center text-gray-500">
    {{ i18n.translate("hotel.notFound") }}
  </div>
</div>
